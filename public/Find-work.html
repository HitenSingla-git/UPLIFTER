<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Find-Work</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js"></script>

    <script>
     let mymodule = angular.module("FindWorkMod", []);
    let myController = mymodule.controller("FindWorkCtrl", function ($scope, $http) {
         
         $scope.jsonAry_FA = [];
         $scope.doFetchAll=function(city,jobtitile)
         {  
            let url="/FetchAllJobs?city="+$scope.selEmail + "&jobtitile="+$scope.selJT;


             $http.get(url).then(fxSuccess,fxFail);
 
             function fxSuccess(response)
             {
                 //alert(JSON.stringify(response.data));
                 $scope.jsonAry_FA=response.data;
                 
             }
             function fxFail(err)
             {
                 alert(err.data);
             }
         }

        $scope.jsonAry = [];
        $scope.doFetchCity  = function () { 
        $scope.selEmail="None"
        let url = "/Fetch-City";
        $http.get(url).then(fxSuccess, fxFail);

        function fxSuccess(response) {
           //alert(JSON.stringify(response.data));
            $scope.jsonAry = response.data;
        }

        function fxFail(err) {
            alert(err.data);
        }
    };


    
      $scope.jsonAry2 = [];
      $scope.doFetchJT  = function () { 
        $scope.selJT="None";
        let url = "/Fetch-JT";
        $http.get(url).then(fxSuccess, fxFail);

        function fxSuccess(response) {
           // alert(JSON.stringify(response.data));
            $scope.jsonAry2 = response.data;
        }

        function fxFail(err) {
            alert(err.data);
        }
    };

}); 
    </script>

    <script>

      //For Deselction Functionality of Radio Buttons
      document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('input[type="radio"].custom-radio').forEach(radio => {
    radio.addEventListener('click', function() {
      const group = document.querySelectorAll(`input[name="${this.name}"]`);

      if (this.getAttribute('data-was-checked') === 'true') {
        this.checked = false;
        this.setAttribute('data-was-checked', 'false');
      } else {
        group.forEach(r => r.setAttribute('data-was-checked', 'false'));
        this.setAttribute('data-was-checked', 'true');
      }
    });
  });
});
;
    </script>

 <style>
    body {
      padding: 30px 0;
      background-color: #f8f9fa;
      color: #343a40;
    }
    
    .container {
      max-width: 1200px;
    }
    
    h2 {
      color: #343a40;
      text-align: center;
      margin-bottom: 40px;
      font-weight: 700;
      position: relative;
      padding-bottom: 15px;
    }
    
    h2:after {
      content: '';
      position: absolute;
      width: 100px;
      height: 3px;
      background-color: #4a6fa5;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
    }
    
    .form-container {
      background-color: white;
      border-radius: 12px;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
      padding: 30px;
      margin-bottom: 30px;
    }
    
    label {
      font-weight: 500;
      color: #343a40;
      margin-bottom: 8px;
    }
    
    .form-control, .form-select {
      border-radius: 8px;
      padding: 10px 15px;
      margin-bottom: 20px;
      border: 1px solid #dee2e6;
      transition: all 0.2s ease;
    }
    
    .form-control:focus, .form-select:focus {
      border-color: #4a6fa5;
      box-shadow: 0 0 0 0.25rem rgba(74, 111, 165, 0.25);
    }
    
    .btn-primary {
      background-color: rgb(49, 31, 153);
      width:125px;
      text-align: center;
      padding-top: 5px;
      padding-bottom: 5px;
      cursor: pointer;
      font-weight: bolder;
      float: left;
      margin-right: 10px;
      border: 1px;
      transition: ease all .5s;
      
      }
    .btn-primary:hover {
      background-color: #3d5d8a;
      border-color: #3d5d8a;
      transform: translateY(-2px);
    }
    
    .radio-group {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .radio-option {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .radio-option input[type="radio"] {
      cursor: pointer;
    }
    
    .radio-option label {
      margin-bottom: 0;
      cursor: pointer;
    }

    .search-results {
      margin-top: 20px;
      background-color: #f8f9fa;
      border-radius: 8px;
      padding: 15px;
      min-height: 200px;
    }
    
    /* Table Styling */
    .table-container {
      background-color: white;
      border-radius: 12px;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
      padding: 20px;
      margin-bottom: 30px;
      overflow-x: auto;
    }
    
    .table {
      margin-bottom: 0;
    }
    
    .table thead {
      background-color: #f8f9fa;
    }
    
    .table thead th {
      color: #4a6fa5;
      font-weight: 600;
      border-bottom: 2px solid #4a6fa5;
      padding: 12px 15px;
      vertical-align: middle;
      white-space: nowrap;
    }
    
    .table tbody tr {
      transition: all 0.2s ease;
    }
    
    .table tbody tr:hover {
      background-color: rgba(74, 111, 165, 0.05);
    }
    
    .table tbody td {
      padding: 12px 15px;
      vertical-align: middle;
      border-bottom: 1px solid #e9ecef;
    }
    
    /* Inline form styling */
    .inline-form {
      display: flex;
      align-items: flex-end;
      gap: 15px;
      flex-wrap: nowrap;
    }
    
    .form-group {
      flex: 1;
      min-width: 0;
    }
    
    .btn-container {
      flex: 0 0 auto;
      margin-bottom: 20px;
    }
  </style> 

  </head>
  <body ng-app="FindWorkMod" ng-controller="FindWorkCtrl" ng-init="doFetchCity(); doFetchJT();">

    
    <div class="container mt-4">
      <h2 class="text-center mb-4">Find Work</h2>
   
      <div class="container form-container">
          <div class="inline-form">
            <!-- Search Filters -->
            <div class="form-group">
              <label class="form-label">City</label>
              <select class="form-select" name="City" ng-model="selEmail">
                <option value="None">Select City</option> 
                <option ng-repeat="obj in jsonAry">{{obj.city}}</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label">Job Title</label>
              <select class="form-select" name="JobTitle" ng-model="selJT">
                <option value="None">Select Job</option>
                <option ng-repeat="obj2 in jsonAry2">{{obj2.jobtitile}}</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label">Education Required</label>
              <div class="radio-group">
                <div class="radio-option">
                  <input type="radio" class="custom-radio" name="a" value="{{obj.edu}}">
                  <label>Yes</label>
                </div>
                <div class="radio-option">
                  <input type="radio" class="custom-radio" name="a" value="{{obj.edu}}">
                  <label>No</label>
                </div>
              </div>
            </div>
            
            <div class="btn-container">
              <button type="button" class="btn btn-primary" ng-click="doFetchAll();">Search Jobs</button>
            </div>
          </div>
      </div>

      <div class="table-container">
        <table class="table table-hover">
          <thead>
            <tr>
              <th scope="col">Job ID</th>
              <th scope="col">Client ID</th>
              <th scope="col">Job Title</th>
              <th scope="col">Job Type</th>
              <th scope="col">Address</th>
              <th scope="col">City</th>
              <th scope="col">Education Required</th>
              <th scope="col">Contact Number</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="obj1 in jsonAry_FA">
              <td scope="row">{{obj1.jobid}}</td>
              <td>{{obj1.cid}}</td>
              <td>{{obj1.jobtitile}}</td>
              <td>{{obj1.jobtype}}</td>
              <td>{{obj1.address}}</td>
              <td>{{obj1.city}}</td>
              <td>{{obj1.edu}}</td>
              <td>{{obj1.contact}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
 Â </body>
</html>